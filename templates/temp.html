<!doctype html>
<html lang="en">
<head>
    {% load staticfiles %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Carbon - Admin Template</title>
    <link rel="stylesheet" href="{% static "./vendor/simple-line-icons/css/simple-line-icons.css" %}">
    <link rel="stylesheet" href="{% static "./vendor/font-awesome/css/fontawesome-all.min.css" %}">
    <link rel="stylesheet" href="{% static "./css/styles.css" %}">
    <script language="javascript">
        function exec1 (command) {
            var ws = new ActiveXObject("WScript.Shell");
            ws.exec(command);
        }
    </script>


</head>
<body class="sidebar-fixed header-fixed">
<!--加载核心库，其他类型支持库在下面根据用户点击选择加载-->
<script src="{% static "./js/recorder-core.js"%}"></script>

<!--加载可选扩展库-->
<script src="{% static "./js/waveview.js" %}"></script>
<script src="{% static "./js/mp3.js" %}"></script>
<script src="{% static "./js/mp3-engine.js" %}"></script>
<script src="{% static "./js/wav.js" %}"></script>
<script>
    function RandomKey(){
	return "randomkey"+(RandomKey.idx++);
    };
RandomKey.idx=0;
</script>

<div class="page-wrapper">
    <nav class="navbar page-header">
        <a href="#" class="btn btn-link sidebar-mobile-toggle d-md-none mr-auto">
            <i class="fa fa-bars"></i>
        </a>

        <a class="navbar-brand" href="#">
            <img src="{% static "./imgs/logo.png" %}" alt="logo">
        </a>

        <a href="#" class="btn btn-link sidebar-toggle d-md-down-none">
            <i class="fa fa-bars"></i>
        </a>



        <ul class="navbar-nav ml-auto">

            {% if user.is_authenticated %}
            <li class="nav-item d-md-down-none">
                <a href="#">
                    <i class="fa fa-bell"></i>
                    <span class="badge badge-pill badge-danger">3</span>
                </a>
            </li>

            <li class="nav-item d-md-down-none">
                <a href="#">
                    <i class="fa fa-envelope-open"></i>
                    <span class="badge badge-pill badge-danger">5</span>
                </a>
            </li>

            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img src="{% static "./imgs/avatar-1.png" %}" class="avatar avatar-sm" alt="logo">
                    <span class="small ml-1 d-md-down-none">{{ user.username }}</span>
                </a>

                <div class="dropdown-menu dropdown-menu-right">
                    <div class="dropdown-header">Account</div>

                    <a href="/login/" class="dropdown-item">
                        <i class="fa fa-user"></i> Profile
                    </a>

                    <a href="#" class="dropdown-item">
                        <i class="fa fa-envelope"></i> Messages
                    </a>

                    <div class="dropdown-header">Settings</div>

                    <a href="#" class="dropdown-item">
                        <i class="fa fa-bell"></i> Notifications
                    </a>

                    <a href="#" class="dropdown-item">
                        <i class="fa fa-wrench"></i> Settings
                    </a>

                    <a href="/logout/" class="dropdown-item">
                        <i class="fa fa-lock"></i> Logout
                    </a>
                </div>
            </li>

            {% else %}
                <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img src="{% static "./imgs/avatar-1.png" %}" class="avatar avatar-sm" alt="logo">
                    <span class="small ml-1 d-md-down-none">Welcome</span>
                </a>

                <div class="dropdown-menu dropdown-menu-right">
                    <div class="dropdown-header">Account</div>

                    <a href="/register/" class="dropdown-item">
                        <i class="fa fa-user"></i> registered
                    </a>

                    <a href="/login/" class="dropdown-item">
                        <i class="fa fa-envelope"></i> login
                    </a>

                </div>
            </li>

            {% endif %}
        </ul>
    </nav>

    <div class="main-container">
        <div class="sidebar">
            <nav class="sidebar-nav">
                <ul class="nav">
                    <li class="nav-title">Navigation</li>

                    <li class="nav-item">
                        <a href="/index/" class="nav-link">
                            <i class="icon icon-speedometer"></i> Dashboard
                        </a>
                    </li>

                    <li class="nav-item nav-dropdown">
                        <a href="#" class="nav-link nav-dropdown-toggle">
                            <i class="icon icon-target"></i> Layouts <i class="fa fa-caret-left"></i>
                        </a>

                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a href="layouts-normal.html" class="nav-link">
                                    <i class="icon icon-target"></i> Normal
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="layouts-fixed-sidebar.html" class="nav-link">
                                    <i class="icon icon-target"></i> Fixed Sidebar
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="layouts-fixed-header.html" class="nav-link">
                                    <i class="icon icon-target"></i> Fixed Header
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="layouts-hidden-sidebar.html" class="nav-link">
                                    <i class="icon icon-target"></i> Hidden Sidebar
                                </a>
                            </li>
                        </ul>
                    </li>

                    <li class="nav-item nav-dropdown">
                        <a href="#" class="nav-link nav-dropdown-toggle">
                            <i class="icon icon-energy"></i> UI Kits <i class="fa fa-caret-left"></i>
                        </a>

                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a href="alerts.html" class="nav-link">
                                    <i class="icon icon-energy"></i> Alerts
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="buttons.html" class="nav-link">
                                    <i class="icon icon-energy"></i> Buttons
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="cards.html" class="nav-link">
                                    <i class="icon icon-energy"></i> Cards
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="modals.html" class="nav-link">
                                    <i class="icon icon-energy"></i> Modals
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="tabs.html" class="nav-link">
                                    <i class="icon icon-energy"></i> Tabs
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="progress-bars.html" class="nav-link">
                                    <i class="icon icon-energy"></i> Progress Bars
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="widgets.html" class="nav-link">
                                    <i class="icon icon-energy"></i> Widgets
                                </a>
                            </li>
                        </ul>
                    </li>

                    <li class="nav-item nav-dropdown">
                        <a href="#" class="nav-link nav-dropdown-toggle">
                            <i class="icon icon-graph"></i> Charts <i class="fa fa-caret-left"></i>
                        </a>

                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a href="chartjs.html" class="nav-link">
                                    <i class="icon icon-graph"></i> Chart.js
                                </a>
                            </li>
                        </ul>
                    </li>

                    <li class="nav-item">
                        <a href="{% url 'forms' %}" class="nav-link">
                        <! a href="forms.html" class="nav-link">
                            <i class="icon icon-puzzle"></i> Forms
                        </a>
                    </li>

                    <li class="nav-item">
                        <a href="tables.html" class="nav-link">
                            <i class="icon icon-grid"></i> Tables
                        </a>
                    </li>

                    <li class="nav-item">
                        <a href="{% url 'temp' %}" class="nav-link active">
                            <i class="icon icon-grid"></i> temp!
                        </a>
                    </li>

                    <li class="nav-title">More</li>

                    <li class="nav-item nav-dropdown">
                        <a href="#" class="nav-link nav-dropdown-toggle">
                            <i class="icon icon-umbrella"></i> Pages <i class="fa fa-caret-left"></i>
                        </a>

                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a href="blank.html" class="nav-link">
                                    <i class="icon icon-umbrella"></i> Blank Page
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="login.html" class="nav-link">
                                    <i class="icon icon-umbrella"></i> Login
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="register.html" class="nav-link">
                                    <i class="icon icon-umbrella"></i> Register
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="invoice.html" class="nav-link">
                                    <i class="icon icon-umbrella"></i> Invoice
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="404.html" class="nav-link">
                                    <i class="icon icon-umbrella"></i> 404
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="500.html" class="nav-link">
                                    <i class="icon icon-umbrella"></i> 500
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="settings.html" class="nav-link">
                                    <i class="icon icon-umbrella"></i> Settings
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>

        <div class="content">
            <div class="container-fluid">

                <! 语音输入栏 >
                <div class="row mt-4">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header bg-light">
                                Input Groups
                            </div>

                            <div class="card-body">
                                <style type="text/css">
                                    span{
                                        color:mediumvioletred;
                                    }
                                </style>

                                    <div class="my-4">
                                        <p style="text-align:center" class="form-text-big">语音输入</p>
                                        <p style="text-align:center">点击“<span>开始录音</span>”按钮进行语音录制，点击“<span>结束录音</span>”按钮结束录音</p>
                                        <div align="center">&nbsp;&nbsp;&nbsp;&nbsp;
                                            <button id="start_record" type="button" class="btn btn-rounded btn-primary btn-lg" onclick="recopen(recstart)">开始录音</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <script src="{% static "./vendor/jquery/jquery.min.js" %}"></script>
                                            <script type="text/javascript">
                                                $("#start_record").on('click', function(){
                                                    $("#stop_record").removeClass("btn-secondary");
                                                    $("#stop_record").addClass("btn-primary");
                                                    $("#start_record").removeClass("btn-primary");
                                                    $("#start_record").addClass("btn-secondary");
                                                    $("#stop_record").attr('disabled',false);
                                                    $("#start_record").attr('disabled',true);
                                                    $("#p_record_notice").html("正在输入...");
                                                });
                                            </script>
                                            <button id="stop_record" disabled="disabled" type="submit" value="upload" class="btn btn-rounded btn-secondary btn-lg" onclick="recstop()">结束录音</button>
                                            <script type="text/javascript">
                                                $("#stop_record").on('click', function(){
                                                    $("#stop_record").removeClass("btn-primary");
                                                    $("#stop_record").addClass("btn-secondary");
                                                    $("#start_record").removeClass("btn-secondary");
                                                    $("#start_record").addClass("btn-primary");
                                                    $("#start_record").attr('disabled',false);
                                                    $("#stop_record").attr('disabled',true);
                                                    $("#p_record_notice").html("输入完成");

                                                });
                                            </script>

{#                                            <div class="pd recpower">#}
{#                                                <div style="height:40px;width:300px;background:#999;position:relative;">#}
{#                                                    <div class="recpowerx" style="height:40px;background:#0B1;position:absolute;"></div>#}
{#                                                    <div class="recpowert" style="padding-left:50px; line-height:40px; position: relative;"></div>#}
{#                                                </div>#}
{#                                            </div>#}

                                            <hr>
                                            	<div class="pd">
                                                    <div style="height:100px;width:300px;border:1px solid #ccc;box-sizing: border-box;display:inline-block" class="recwave"></div>
                                                    <input type="checkbox" class="recwaveSet" checked style="display:none">
                                                </div>
                                            <small id="p_record_notice" class="form-text-green"><br></small>
                                            	<hr>
                                            <audio class="recPlay" style="width:100%"></audio>
                                            <div class="reclog"></div>
                                            <div class="recinfo"></div>
                                        </div>
                                    </div>

                            </div>
                        </div>
                    </div>
                </div>

                <! 转文字结果栏 >
                <div class="row mt-4">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header bg-light">
                                转文字结果
                            </div>

                            <div class="card-body">
                                <div class="col-md">
                                    <div class="form-group">

                                        <textarea id="translate_to_word" class="form-control form-control-lg" rows="6" placeholder="文字输出结果" ></textarea><br>

                                        <div align="center">
                                            <button id="make_report" type="button" class="btn btn-rounded btn-primary btn-lg" onclick="exec1('D:\\python\\pythonw.exe E:\\workspace_django\\mysite\\static\\py\\audio_transfer.py')">文字转换</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                                            <button id="make_report" type="button" class="btn btn-rounded btn-primary btn-lg" onclick="show()">生成报告</button>
                                            <script type="text/javascript">
                                                function show()
                                                {
                                                    var htmlobj=$.ajax({url:"{% static "./test.txt" %}",scriptCharset: 'utf-8',async:false});
                                                    $("#translate_to_word").html(htmlobj.responseText);

                                                }
                                            </script>
                                        </div>


                                    </div>
                                </div>
                            </div>



                        </div>
                    </div>
                </div>

                <! 选择患者栏 >
                <div class="row mt-4">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header bg-light">
                                选择患者
                            </div>

                            <div class="card-body">
                                <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="single-select">患者姓名</label>
                                            <select id="patient-select" class="form-control" onchange="patient_onchange()">
                                                <option value="">请选择</option>
                                            </select>
                                        </div>
                                    </div>
                            </div>



                        </div>
                    </div>
                </div>


                <! 模板选择栏 >
                <div class="row mt-4">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header bg-light">
                                报告模板
                            </div>

                            <div class="card-body">
                                <div class="col-md">
                                    <div class="col-md-12 mb-4">
                                        <ul class="nav nav-tabs" role="tablist">
                                            <li class="nav-item">
                                                <a class="nav-link active" data-toggle="tab" href="#home" role="tab" aria-controls="home">甲状腺</a>
                                            </li>

                                            <li class="nav-item">
                                                <a class="nav-link" data-toggle="tab" href="#profile" role="tab" aria-controls="profile">x腺</a>
                                            </li>

                                            <li class="nav-item">
                                                <a class="nav-link" data-toggle="tab" href="#messages" role="tab" aria-controls="messages">y腺</a>
                                            </li>
                                        </ul>

                                        <div class="tab-content">
                                            <div class="tab-pane active" id="home" role="tabpanel">
                                                <! 表格框架，可能换成一堆空栏>
                                                <! 患者信息 >
                                                <div class="row">
                                                    <div class="col-md-12 ">
                                                        <div class="form-group">
                                                            <div><label>患者信息</label></div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">姓&nbsp;&nbsp;&nbsp;&nbsp;名</span>
                                                                    </div>
                                                                    <input id="table_patient_name" type="text" class="form-control" placeholder="请输入姓名">
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">性&nbsp;&nbsp;&nbsp;&nbsp;别</span>
                                                                    </div>
                                                                    <input id="table_patient_sex"type="text" class="form-control" placeholder="请输入性别">
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">年龄</span>
                                                                    </div>
                                                                    <input id="table_patient_age" type="text" class="form-control" placeholder="请输入年龄">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">岁</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">科&nbsp;&nbsp;&nbsp;&nbsp;别</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="门诊">
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">门诊号</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="1111111">
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">检查号</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="1111111">
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">检查项目</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="甲状腺超声">
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">检查机器</span>
                                                                    </div>
                                                                    <select id="single-select" class="form-control">
                                                                        <option>E133-1</option>
                                                                        <option>2</option>
                                                                        <option>3</option>
                                                                        <option>4</option>
                                                                        <option>5</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <hr>

                                                <! 甲状腺右叶：上下径mm，左右径mm，前后径mm >
                                                <div class="row">
                                                    <div class="col-md-12 ">
                                                        <div class="form-group">
                                                            <div><label>甲状腺右叶</label></div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">上下径</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="N/A">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">mm</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">左右径</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="N/A">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">mm</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">前后径</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="N/A">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">mm</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <! 甲状腺左叶：上下径mm，左右径mm，前后径mm >
                                                <div class="row">
                                                    <div class="col-md-12 ">
                                                        <div class="form-group">
                                                            <div><label>甲状腺左叶</label></div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">上下径</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="N/A">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">mm</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">左右径</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="N/A">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">mm</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">前后径</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="N/A">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">mm</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <! 甲状腺峡部厚度： mm。 >
                                                <div class="row">
                                                    <div class="col-md-12 ">
                                                        <div class="form-group">
                                                            <div><label>甲状腺峡部</label></div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">厚&nbsp;&nbsp;&nbsp;&nbsp;度</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="N/A">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">mm</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <! 甲状腺形态大小正常，包膜光滑，实质回声均匀，未见明确肿块回声。>
                                                <div class="row">
                                                    <div class="col-md-12 ">
                                                        <div class="form-group">
                                                            <div><label>甲状腺形态</label></div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">大&nbsp;&nbsp;&nbsp;&nbsp;小</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="正常">
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">实质回声</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="均匀">
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <input type="text" class="form-control" placeholder="未见明确">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">肿块回声</span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <! CDFI：甲状腺内血流分布及频谱未见异常。>
                                                <div class="row">
                                                    <div class="col-md-12 ">
                                                        <div class="form-group">
                                                            <div><label>CDFI：甲状腺内</label></div>
                                                            <div class = "col-md-6" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">血流分布</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="正常">
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-6" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">血流频谱</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="正常">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <! 右侧动脉PSV=cm/s, EDV=cm/s，RI:。>
                                                <div class="row">
                                                    <div class="col-md-12 ">
                                                        <div class="form-group">
                                                            <div><label>右侧动脉</label></div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">PSV=</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="N/A">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">cm/s</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">EDV=</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="N/A">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">cm/s</span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <! 左侧动脉PSV=cm/s, EDV=cm/s，RI:。>
                                                <div class="row">
                                                    <div class="col-md-12 ">
                                                        <div class="form-group">
                                                            <div><label>左侧动脉</label></div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">PSV=</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="N/A">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">cm/s</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class = "col-md-4" style="float:left">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">EDV=</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="N/A">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">cm/s</span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <! 诊断意见：>
                                                <div class="row">
                                                    <div class="col-md-12 ">
                                                        <div class="form-group">
                                                            <div><label>诊断意见</label></div>
                                                            <div class = "col-md-12" style="float:left">
                                                                <div class="input-group mb-3">
                                                                     <textarea id="textarea" class="form-control" rows="6" placeholder="诊断意见"></textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <hr>
                                                <! 审核医师 >
                                                <div class="row">
                                                    <div class="col-md-12 ">
                                                        <div class="form-group">
                                                            <div class = "col-md-4" style="float:right">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">审核医师</span>
                                                                    </div>
                                                                    <input type="text" class="form-control" placeholder="xxx">
                                                                </div>
                                                            </div>
                                                            <script src="{% static "./vendor/jquery/jquery.min.js" %}"></script>

                                                            <div class = "col-md-4" style="float:right">
                                                                <div class="input-group mb-3">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">检查日期</span>
                                                                    </div>
                                                                    <input type="date" id="date_info" class="form-control" val="">
                                                                    <script type="text/javascript">
                                                                        $(document).ready(function () {
                                                                            var time = new Date();
                                                                            var day =("0"+time.getDate()).slice(-2);
                                                                            var month =("0"+time.getMonth()+1).slice(-2);
                                                                            var today = time.getFullYear()+"-"+(month)+"-"+(day);
                                                                            $('#date_info').val(today);
                                                                        })
                                                                    </script>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div align="right">
                                                    <button id="save_table" type="button" class="btn btn-rounded btn-primary btn-lg">保存报告</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <script src="{% static "./vendor/jquery/jquery.min.js" %}"></script>
                                                    <script type="text/javascript">
                                                        $("#save_table").on('click', function(){
                                                            $("#p_save_notice").html("保存成功！");
                                                        });
                                                    </script>
                                                    <small id="p_save_notice" class="form-text-green"><br></small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                </div>

                                            </div>

                                            <div class="tab-pane" id="profile" role="tabpanel">
                                                2. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure
                                                dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                            </div>

                                            <div class="tab-pane" id="messages" role="tabpanel">
                                                3. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure
                                                dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>



    </div>
</div>
<script src="{% static "./vendor/jquery/jquery.min.js" %}"></script>
<script src="{% static "./vendor/popper.js/popper.min.js" %}"></script>
<script src="{% static "./vendor/bootstrap/js/bootstrap.min.js" %}"></script>
<script src="{% static "./vendor/chart.js/chart.min.js" %}"></script>
<script src="{% static "./js/carbon.js" %}"></script>
<script src="{% static "./js/demo.js" %}"></script>

<! 患者选择下拉菜单联动mysql>
<script>
    $(function () {
        $.ajax({
            type: "post",
            url: "/ajax_patient",
            dataType: "json",
            success: function (data) {
                console.info(data);
                for (var i = 0; i < data.length; i++) {
                    console.info(data[i][1]);
                    var pOption = "<option value='" + data[i][0] + "'>" + data[i][0] + "</option>";
                    $("#patient-select").append(pOption);
                }
            }
        });
    });

</script>

<!选中患者修改报告对应选项>
<script>
    function patient_onchange() {
        $.ajax({
            type: "post",
            url: "/ajax_patient",
            dataType: "json",
            success: function (data) {
                console.info(data);
                var name = document.getElementById("patient-select").value;
                for (var i=0;i<data.length;i++){
                    if(name == data[i][0]){
                        $("#table_patient_name").attr("value",name);
                        $("#table_patient_age").attr("value",data[i][2]);
                        if(data[i][1]==1){
                            $("#table_patient_sex").attr("value","男");
                        }
                        else{
                            $("#table_patient_sex").attr("value","女");
                        }

                    }
                }
            }
        });




            //$("#table_patient_name").attr("value","1");
        //$("#table_patient_sex").attr("value","2");
        //$("#table_patient_age").attr("value","3");
    }
</script>

<script>
function reclog(s){
	$(".reclog").prepend('<div>['+new Date().toLocaleTimeString()+']'+s+'</div>');
};
$(window).bind("error",function(e){
	reclog('<span style="color:red">【Error】:<pre>'+(e.error?e.error.stack:event.message)+'</pre></span>');
});
</script>

<script>
    var rec;
    function recopen(callback){
	    var type="wav";
	    var bit=+16;
	    var sample=+16000;
	    var wave,waveSet=$(".recwaveSet")[0].checked;
	    rec=Recorder({
	    	type:type
	    	,bitRate:bit
	    	,sampleRate:sample
	    	,onProcess:function(buffers,level,time,sampleRate){
	    		$(".recpowerx").css("width",level+"%");
	    		$(".recpowert").html(time+"/"+level);

	    		waveSet && wave.input(buffers[buffers.length-1],level,sampleRate);
	    	}
	    });
	    rec.open(function(){
            reclog("已打开:"+type+" "+bit+"kbps");
	    	wave=Recorder.WaveView({elem:".recwave"});
	    	callback();
	    },function(e,isUserNotAllow){
	        reclog((isUserNotAllow?"UserNotAllow，":"")+"打开失败："+e);
        });

    };

    //点击启动录音
    function recstart(){
	    if(rec){
		    rec.start();
	    	reclog("录制中...");
    	};
    };
    var recblob={};
    //点击结束录音并保存
    function recstop(batCall){
        var id;
	    if(rec){
	    	var t1=Date.now();
	    	rec.stop(function(blob,time){
	    		id=RandomKey(16);
	    		recblob[id]={blob:blob,set:$.extend({},rec.set),time:time};
	    		batCall&&batCall();
	    		recdown(id);
	    	},function(s){
	    		reclog("失败："+s);
	    		batCall&&batCall();
	    	});
	    };
    };
    //保存录音
    function recdown(key){
	var o=recblob[key];
	if(o){
		var cls=RandomKey(16);
		var name="rec-"+o.time+"ms-"+o.set.bitRate+"kbps-"+o.set.sampleRate+"hz."+o.set.type;
		o.down=(o.down||0)+1;
		var downA=document.createElement("A");
		downA.innerHTML="下载 "+name;
		downA.href=URL.createObjectURL(o.blob);
		//alert(downA)

        var formData = new FormData();
		formData.append('myfile', o.blob);
		$.ajax({
    url: '/upload/',
    type: 'POST',
    cache: false,
    data: formData,
    processData: false,
    contentType: false,
})
        //alert (o.blob)



		//downA.download=name;
		//$("."+cls).prepend(downA);
		//downA.click();
	};
};
    var intp=function(s,len){
	    s=""+s;
	    if(s.length>=len)return s;
	    return ("_______"+s).substr(-len);
    };
</script>

</body>
</html>
